<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %>	
	<!-- 동아리 개설신청 상세정보 -->
	<div class="card box-shadow d-flex m-4" style="min-height: 87%;">
   <div class="h-100">
      <div class="custom-card">
         <div class="card-header" style="border-radius: 20px 20px 0 0; background-color:#154FA9; font-weight:bold; color:white;">개설 신청한 동아리 상세정보</div>
         <div class="card-body">
	<table class="table table-border">
		<tr>
			<th>동아리 대표 성명</th>
			<td>${club.studentVO.stNm}</td>
		</tr>
		<tr>
			<th>동아리 대표 학번</th>
			<td>${club.stCd }</td>
		</tr>
		<tr>
			<th>동아리명</th>
			<td>${club.clubNm }</td>
		</tr>
		<tr>
			<th>동아리 지도 교수</th>
			<td>${club.professorVO.prNm }</td>
		</tr>
		<tr>
			<th>동아리 계획서</th>
			<td>${club.clubPlan }</td>
		</tr>
		<tr>
			<th>동아리 상태</th>
			<td>${club.clubStatus }</td>
		</tr>
		<c:if test="${not empty club.clubRefuse}"><!-- 동아리 거절 내용이 있을경우 -->
		<th>동아리 거절 사유</th>
		<td>${club.clubRefuse }</td>
		</c:if>
		<tr>
			<td colspan="4">
			<sec:authorize access="hasRole('ROLE_TS')"><!-- 교직원 -->
				<input class="btn btn-success" type="button" value="승인" onclick="approvalRequest()">
				<input class="btn btn-danger" type="button" value="거절" onclick="refuseRequest()"> 
			</sec:authorize>
			<sec:authorize access="hasRole('ROLE_PR')"><!-- 교수 -->
				<input class="btn btn-success" type="button" value="확인" onclick="confirmedRequest()">
				<input class="btn btn-danger" type="button" value="거절" onclick="refuseRequest()">
			</sec:authorize>
			
			<input class="btn btn-secondary" type=button value="뒤로가기" onclick="history.back();"></td>
		</tr>
	</table>
	</div>
	</div>
	</div>
	</div>
	
<script>
	function approvalRequest() {
	  window.location.href = "${pageContext.request.contextPath}/club/clubInsertApproval.do?who=${club.clubCd}&what=승인";
	}
	function refuseRequest() {
		  window.location.href = "${pageContext.request.contextPath}/club/clubRequestRefuseGo.do?who=${club.clubCd}&what=거절";
		} 
	function confirmedRequest() {
		  window.location.href = "${pageContext.request.contextPath}/club/clubInsertApproval.do?who=${club.clubCd}&what=확인";
		}
	
</script>
